<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit"/>
    <title>{{$.title}} {{ $.path }}</title>
    {{- if eq $.account.Mode "aliyundrive"}}
    <meta name="referrer" content="no-referrer">
    {{- end}}
    <style>
        *{box-sizing:border-box}h1{border-bottom:1px solid silver;margin-bottom:10px;padding-bottom:10px;white-space:nowrap}table{border-collapse:collapse;font-family:Consolas,monaco,monospace}th{font-weight:700}.file-name{text-align:left}.file-size{padding-left:4em}.file-date-created,.file-date-modified{padding-left:2em}.file-date-created,.file-date-modified,.file-size{text-align:end;white-space:nowrap}.icon{padding-left:1.5em;text-decoration:none}.icon:hover{text-decoration:underline}.icon-file{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAABHUlEQVR42o2RMW7DIBiF3498iHRJD5JKHurL+CRVBp+i2T16tTynF2gO0KSb5ZrBBl4HHDBuK/WXACH4eO9/CAAAbdvijzLGNE1TVZXfZuHg6XCAQESAZXbOKaXO57eiKG6ft9PrKQIkCQqFoIiQFBGlFIB5nvM8t9aOX2Nd18oDzjnPgCDpn/BH4zh2XZdlWVmWiUK4IgCBoFMUz9eP6zRN75cLgEQhcmTQIbl72O0f9865qLAAsURAAgKBJKEtgLXWvyjLuFsThCSstb8rBCaAQhDYWgIZ7myM+TUBjDHrHlZcbMYYk34cN0YSLcgS+wL0fe9TXDMbY33fR2AYBvyQ8L0Gk8MwREBrTfKe4TpTzwhArXWi8HI84h/1DfwI5mhxJamFAAAAAElFTkSuQmCC) left top no-repeat}.icon-dir{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAd5JREFUeNqMU79rFUEQ/vbuodFEEkzAImBpkUabFP4ldpaJhZXYm/RiZWsv/hkWFglBUyTIgyAIIfgIRjHv3r39MePM7N3LcbxAFvZ2b2bn22/mm3XMjF+HL3YW7q28YSIw8mBKoBihhhgCsoORot9d3/ywg3YowMXwNde/PzGnk2vn6PitrT+/PGeNaecg4+qNY3D43vy16A5wDDd4Aqg/ngmrjl/GoN0U5V1QquHQG3q+TPDVhVwyBffcmQGJmSVfyZk7R3SngI4JKfwDJ2+05zIg8gbiereTZRHhJ5KCMOwDFLjhoBTn2g0ghagfKeIYJDPFyibJVBtTREwq60SpYvh5++PpwatHsxSm9QRLSQpEVSd7/TYJUb49TX7gztpjjEffnoVw66+Ytovs14Yp7HaKmUXeX9rKUoMoLNW3srqI5fWn8JejrVkK0QcrkFLOgS39yoKUQe292WJ1guUHG8K2o8K00oO1BTvXoW4yasclUTgZYJY9aFNfAThX5CZRmczAV52oAPoupHhWRIUUAOoyUIlYVaAa/VbLbyiZUiyFbjQFNwiZQSGl4IDy9sO5Wrty0QLKhdZPxmgGcDo8ejn+c/6eiK9poz15Kw7Dr/vN/z6W7q++091/AQYA5mZ8GYJ9K0AAAAAASUVORK5CYII=) left top no-repeat}.icon-up{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmlJREFUeNpsU0toU0EUPfPysx/tTxuDH9SCWhUDooIbd7oRUUTMouqi2iIoCO6lceHWhegy4EJFinWjrlQUpVm0IIoFpVDEIthm0dpikpf3ZuZ6Z94nrXhhMjM3c8895977BBHB2PznK8WPtDgyWH5q77cPH8PpdXuhpQT4ifR9u5sfJb1bmw6VivahATDrxcRZ2njfoaMv+2j7mLDn93MPiNRMvGbL18L9IpF8h9/TN+EYkMffSiOXJ5+hkD+PdqcLpICWHOHc2CC+LEyA/K+cKQMnlQHJX8wqYG3MAJy88Wa4OLDvEqAEOpJd0LxHIMdHBziowSwVlF8D6QaicK01krw/JynwcKoEwZczewroTvZirlKJs5CqQ5CG8pb57FnJUA0LYCXMX5fibd+p8LWDDemcPZbzQyjvH+Ki1TlIciElA7ghwLKV4kRZstt2sANWRjYTAGzuP2hXZFpJ/GsxgGJ0ox1aoFWsDXyyxqCs26+ydmagFN/rRjymJ1898bzGzmQE0HCZpmk5A0RFIv8Pn0WYPsiu6t/Rsj6PauVTwffTSzGAGZhUG2F06hEc9ibS7OPMNp6ErYFlKavo7MkhmTqCxZ/jwzGA9Hx82H2BZSw1NTN9Gx8ycHkajU/7M+jInsDC7DiaEmo1bNl1AMr9ASFgqVu9MCTIzoGUimXVAnnaN0PdBBDCCYbEtMk6wkpQwIG0sn0PQIUF4GsTwLSIFKNqF6DVrQq+IWVrQDxAYQC/1SsYOI4pOxKZrfifiUSbDUisif7XlpGIPufXd/uvdvZm760M0no1FZcnrzUdjw7au3vu/BVgAFLXeuTxhTXVAAAAAElFTkSuQmCC) left top no-repeat}
        .footer {
            margin-top: 32px;
            margin-bottom: 32px;
            text-align: center;
            position: fixed;
            width: 100%;
            bottom: 5px;
            left: 0px;
            z-index: 1;
            opacity: 0.3;
        }
        a{text-decoration: none;}
    </style>
    {{- if ne $.config.FaviconUrl ""}}
    <link rel="icon" href="{{$.config.FaviconUr}}" type="image/x-icon" />
    <link rel="shortcut icon" href="{{$.config.FaviconUr}}" type="image/x-icon" />
    {{- else}}
    <link rel="icon" href="/static/img/favicon-{{$.account.Mode}}.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/static/img/favicon-{{$.account.Mode}}.ico" type="image/x-icon" />
    {{- end}}
    <link rel="stylesheet" href="{{index $.config.CdnFiles "viewer@css"}}">
    <link rel="stylesheet" href="{{index $.config.CdnFiles "fontawesome@css"}}">
    <link rel="stylesheet" href="{{index $.config.CdnFiles "APlayer@css"}}">
    <link rel="stylesheet" href="{{index $.config.CdnFiles "sweetalert2@css"}}">
    <script src="{{index $.config.CdnFiles "jquery@js"}}"></script>
    <script src="{{index $.config.CdnFiles "sweetalert2@js"}}"></script>
    <script src="{{index $.config.CdnFiles "viewer@js"}}"></script>
    <script src="{{index $.config.CdnFiles "APlayer@js"}}"></script>
    <script src="{{index $.config.CdnFiles "hls@js"}}"></script>
    <script src="{{index $.config.CdnFiles "flv@js"}}"></script>
    <script src="{{index $.config.CdnFiles "artplayer@js"}}"></script>
    <script src="{{index $.config.CdnFiles "artplayer-danmuku@js"}}"></script>
    <script src="{{index $.config.CdnFiles "clipboard@js"}}"></script>
    <script src="{{index $.config.CdnFiles "video@simple@js"}}?v={{$.version}}"></script>
    <script src="{{index $.config.CdnFiles "simple@index@js"}}?v={{$.version}}"></script>
</head>
<body>
<h1 id="heading">{{$.title}} {{ $.path }}</h1>

{{- if $.has_pwd}}
<script src="{{index $.config.CdnFiles "cookie@js"}}"></script>
<script src="{{index $.config.CdnFiles "md5@js"}}"></script>
<script>
    promptPwd("{{$.pwd_path}}", "{{$.pwd_err_msg}}");
</script>
{{- else}}
<table id="table">
    <thead>
    <tr>
        <th class="file-name"><span class="table-head" data-order-seq="" data-order-type="file-name" style="cursor: default;">Name</span></th>
        <th class="file-size"><span class="table-head" data-order-seq="" data-order-type="file-size" style="cursor: default;">Size</span></th>
        <th class="file-date-modified"><span class="table-head" data-order-seq="" data-order-type="file-date-modified" style="cursor: default;">Date Modified</span></th></th>
        <th class="file-date-modified">Download</th>
    </tr>
    </thead>
    <tbody>
    {{- if $.has_parent}}
    <tr class="parent">
        <td class="file-name">
            <a class="icon icon-up" href="{{$.parent_path}}">..</a>
        </td>
        <td class="file-size"></td>
        <td class="file-date-modified"></td>
    </tr>
    {{- end}}
    {{- range $.fns}}
    <tr>
        {{- if .IsFolder}}
        <td class="file-name">
            <a class="{{iconclass .IsFolder .FileType}}" href="javascript:void(0)" data-url="{{.Path}}">
            {{.FileName}}
            </a>
        </td>
        {{- else}}
        <td class="file-name">
            <a class="{{iconclass .IsFolder .FileType}}" data-file-type="{{.FileType}}" data-parent-path="{{.ParentPath}}" data-preview="{{$.config.EnablePreview}}" data-view-type="{{.ViewType}}"
               data-title="{{.FileName}}" data-url="{{.Path}}" href="javascript:void(0);">
                {{.FileName}}
            </a>
        </td>
        {{- end}}
        <td class="file-size">{{.SizeFmt}}</td>
        <td class="file-date-modified">{{.LastOpTime}}</td>
        <td class="file-size">
            <a href="javascript:void(0)" data-path="{{.Path}}" data-clipboard-action="copy" data-toggle="tooltip" data-placement="bottom" class="copyBtn">
                <i class="fa fa-copy" aria-hidden="true"></i>
            </a>
            {{- if not .IsFolder}}
            <a href="javascript:void(0)" data-url="{{.Path}}" title="下载" class="download_btn" target="_blank">
                <i class="fa fa-download" aria-hidden="true"></i>
            </a>
            {{- end}}
        </td>
    </tr>
    {{- end}}
    </tbody>
</table>
<div class="footer">
    <p>
        {{- if eq $.config.Footer ""}}
        ©2021 <a href="https://github.com/libsgh/PanIndex" target="_blank">PanIndex</a>. All rights reserved.
        {{- else}}
        {{$.config.Footer | unescaped}}
        {{- end}}
    </p>
</div>
{{end}}
<div id="aplayer" data-lrc-path="{{$.config.LrcPath}}" data-enable-lrc="{{$.config.EnableLrc}}"></div>
<template id="video-modal" data-config-subtitle="{{$.config.Subtitle}}" data-config-danmuku="{{$.config.Danmuku}}"
          data-config-danmuku-path="{{$.config.DanmukuPath}}" data-config-subtitle-path="{{$.config.SubtitlePath}}"></template>
</body>
</html>